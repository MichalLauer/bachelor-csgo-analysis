\chapter{Teoretická část}
Cílem praktické části je prozkoumat dva typy modelů. První typ modelu bude predikovat výhru zápasu pro jednotlivé hráče a druhý typ pro jednotlivé mapy. Hlavním cílem 
modelu pro hráče bude identifikovat významné charakteristiky hráčů na vybraných mapách, a následně rozdíly interpretovat. V druhém modelu bude zkoumaná výhra týmu v zápase.
V tomto typu modelu se jako prediktory použijí agregované charakteristiky hráčů jednotlivých týmu. Pro agregaci bude použit buď aritmetický nebo geometrický průměr. Všechny
modely jsou vyhodnoceny pomocí testovacího datového souboru a matice záměn. Pro tvorbu modelů a veškerou práci s daty je použit programovací jazyk R \cite{r_core_team_r_2022}
a vývojové prostředí RStudio \cite{rstudio_rstudio_2022}.

\section{Cíle analýzy}
Cílem analýzy je vytvořit logistické modely pro předpověď výhry jak pro individuální hráče, tak pro tým. Jelikož se charakteristiky hráčů i zápasů mohou měnit dle mapy,
na které se zápas odehrává, modely pro individuální hráče jsou tříděné přes kategorie map. Modely pro předpověď výhry týmu používají interakci mezi mapou a začínající
stranou.

Pro hráče budou sestaveny logistické modely z celého datového souboru a pro každou mapu zvlášť. Modely budou následně vyhodnoceny pomocí statistik vycházejících
z matice záměn a bude porovnána významnost jejich parametrů. Modely budou porovnané na vybraných dvou mapách, a to na mapě Mirage a Vertigo. Mirage je klasický mapa, která je
ve hře od jeho vydání. Vertigo je naopak nejnovější přírůstek do profesionální scény a hráči, v době extrakce datového souboru, mapu ještě plně strategicky 
neznali. Modely budou porovnány podle přesnosti predikce a podle toho, jaké prediktory jsou pro model významné.

Modely pro týmy budou sestavené nejprve z agregovaného datového souboru a následně pro dva vybrané referenční týmy. První tým, pro který se vytvoří model, bude tým Astralis.
Ten je dlouhodobě považován za jeden z nejlepších týmu na světě a v grafu \ref{fig:mira_vyhry_tymu} je vidět, že má v datovém souboru největší míru výhry. Druhým týmem bude 
německý celek Sprout. Tým Sprout se řadí v době extrakce dat k profesionálnímu týmu s průměrným třicátým místem na světovém žebříčku. Modely jsou vytvořené pouze pro dva týmy z toho
důvodu, že je celkový počet týmů velmi vysoký a bylo by komplikované porovnávat všechny týmy naráz. Z toho důvodu se budou hledat významné rozdíly mezi dvěma referenčními modely a
jedním celkovým modelem, který je sestaven na celém datovém souboru. Mezi modely bude porovnaná jak přesnost predikce, tak významnost parametrů. Jelikož je původní spojený datový
soubor na úrovni hráčů, charakteristiky hráčů se musí agregovat na úroveň týmů a zápasů.

\section{Příprava dat}
Dataset\footnote{https://www.kaggle.com/datasets/mateusdmachado/csgo-professional-matches} obsahuje čtyři datové soubory, které popisují zápasy ve hře
\ac{CSGO}. K potřebám této bakalářské práce budou použity pouze soubory \textit{players.csv} a \textit{results.csv}. Datové soubory jsou následně spojeny do jednoho datového souboru,
který obsahuje charakteristiky všech hráčů v právě jednom zápase, potřebné informace o zápase a výsledek (zda hráč zápas vyhrál či nikoliv). Zbylé dva soubory obsahují
informace, které jsou již z probíhajících zápasů a z volby map. Tyto informace pro predikci výhry ještě před začátkem zápasu nelze využít. Žádný z těchto
zbylých dvou souborů (\textit{picks.csv}, \textit{economy.csv}) proto v bakalářské práci použit není.

\subsection{Soubor players.csv}
Datový soubor \textit{players.csv} obsahuje charakteristiky jednotlivých hráčů v daném zápase. Původní datový soubor obsahuje 101 proměnných a 383 317 pozorování.
V původním datovém souboru se jeden řádek (pozorování) rovná charakteristikám jednoho hráče za celý zápas, který se může odehrávat až na třech mapách.
Pro potřeby bakalářské práce je tak nutné získat charakteristiky hráčů za jednotlivé mapy. Proto je původní datový soubor transformován do podoby, kde se
jedno pozorování rovná charakteristikám právě jednoho hráče na právě jedné mapě, a to bez ohledu na to, kolik map se v daném zápase hrálo. Jinak řečeno, transformovaný
datový soubor nebere v potaz, zda se daná mapa hrála jako první, druhá, či třetí.

Z datového souboru jsou odstraněné záznamy o mapě Default. Ta značí automatickou výhru pro jeden team, například díky formátu turnaje. V souboru je také možné narazit na tým,
pro který za zápas na jedné mapě nehrálo právě 5 hráčů. Více než pět hráčů mohlo na mapě hrát v případě použitého náhradníka. 
Může se také stát, že hraje méně hráčů, pokud se jeden například nestihne dostavit. V obou případech jsou data pro danou mapu v zápase odstraněná.

\newpage
Transformovaný a očištěný datový soubor má 10 proměnných a 640 225 pozorování. Příklad jednotlivých pozorování v transformovaném datovém souboru je v
přiložené tabulce \ref{tab:players_csv_transformovano}. Interpretace charakteristik je následující:

\begin{itemize}
    \item \textbf{match\_id} --- identifikátor zápasu
    \item \textbf{player\_id} --- identifikátor hráče
    \item \textbf{team} --- jméno týmu
    \item \textbf{map} --- název hrané mapy
    \item \textbf{kills} --- počet zabití hráče v zápase na dané mapě
    \item \textbf{assists} --- počet asistencí hráče v zápase na dané mapě
    \item \textbf{deaths} --- počet smrtí hráče v zápase na dané mapě
    \item \textbf{hs} --- procento zabití, které lze označit jako headshot\footnote{hráč zabil nepřítele střelou do hlavy}
    \item \textbf{fkdiff} --- rozdíl, kolikrát hráč zabil jako první nepřítele versus kolikrát byl zabit jako první
    \item \textbf{rating} --- shrnutí více charakteristik za jeden zápas do jednoho ukazatele výkonu\footnote{\url{https://www.hltv.org/news/20695/introducing-rating-20}}
\end{itemize}

\subsection{Soubor results.csv}
Druhý datový soubor, který je pro analýzu použit, obsahuje výsledky daných zápasů. Soubor se původně skládá z 19 proměnných a 45 773 pozorování. Datový soubor 
\textit{results.csv} obsahuje na rozdíl od datového souboru \textit{players.csv} jedno chybné pozorování. Dle něho hrál tým sám proti sobě, což nedává věcný a logický smysl.
Jelikož je zápas na webovém portálu zadán správně, nejspíše se jedná o neznámou chybu, která nastala při exportu dat z webového portálu. Zároveň jsou vybrané pouze proměnné,
které pro predikci lze využít. Dále je zde rozdělený tým Astralis do dvou týmů: týmu Astralis a tým \uv{?}. Důvod rozdělení je ten, že historicky hrál tým bez organizace a
označoval se jako \uv{?}. Po vytvoření organizace Astralis jsou hráči řazeni pod tuto organizaci. Jelikož se tímto týmem zabývá specializovaný logistický model, je
označení týmu sjednoceno pod název Astralis. 

Po transformacích vznikne tabulka o 7 proměnných a 91 502 pozorování. Každé pozorování identifikuje výsledek právě jednoho týmu v jednom zápase
na jedné mapě. Příklad je zobrazen v přiložené tabulce \ref{tab:results_csv_transformovano}. Jednotlivé proměnné lze interpretovat následovně:
\begin{itemize}
    \item \textbf{date} --- datum, kdy se hrál zápas
    \item \textbf{match\_id} --- identifikátor zápasu
    \item \textbf{team} --- jméno týmu
    \item \textbf{map} --- název hrané mapy
    \item \textbf{map\_winner} --- binární značení, zda tým vyhrál (1) či prohrál (0)
    \item \textbf{starting\_ct} --- binární značení, zda tým začal zápas na straně Counter-Teroristů (1) či Teroristů (0)
    \item \textbf{team\_rank} --- rank týmu v okamžik, kdy se zápas hrál\footnote{\url{https://www.hltv.org/news/16061/introducing-csgo-team-ranking}}
\end{itemize}

\subsection{Datový soubor pro modelování} \label{sec:spojent_datovy_soubor}
Pro modelování je nutné vytvořit jeden datový soubor, na kterém bude model sestaven. Datový model je získán spojením představených souborů
\textit{players.csv} a \textit{results.csv}. Datové soubory jsou spojené pomocí proměnných \textit{match\_id}, \textit{team} a \textit{map}. Při propojování
souborů jsou smazané záznamy, které nejsou reprezentovány v obou souborech. To znamená, že charakteristiky hráčů v zápase, pro který není výsledek, jsou smazané.
Stejně jsou smazané zápasy, pro které nejsou zadané charakteristiky hráčů. Spojený datový soubor je pak na úrovni jednotlivých hráčů a ukazuje jejich charakteristiky
v právě jednom zápase na právě jedné mapě. Příklad spojeného datového souboru je v přiložené tabulce \ref{tab:data_spojena}.

\subsection{Agregovaný datový soubor} \label{sec:agregovany_datovy_soubor}
Spojený datový soubor obsahuje charakteristiky hráčů na úrovni jednotlivých zápasů. To je vhodné pro první logistický model, který se zabývá predikcí a identifikací
významných prediktorů pro individuální hráče. Pro predikci výhry týmu a identifikaci významných prediktorů pro tým je nutné data agregovat. Agregace charakteristik, u kterých
to dává věcný smysl, je použit aritmetický průměr. Pro statistiky, u kterých dává věcný smysl násobení, je použit průměr geometrický. Jako příklad lze uvést charakteristika 
počtu zabití (prediktor \textit{kills}), která je agregovaná pro daný tým jako průměrný počet zabití (prediktor \textit{mean\_kills}) hráčů týmu na dané mapě. Pro charakteristiku
procent zabití do hlavy (prediktor \textit{hs}) je použit geometrický průměr a v modelu je použitý průměr procenta zabití do hlavy (prediktor \textit{mean\_hs}).
Příklad agregovaných dat je v přiložené tabulce \ref{tab:data_agregovana}. Popis agregovaných prediktorů je pak v následující tabulce.

\begin{table}[H]
    \centering
    \caption{Přehled agregací charakteristik pro daný tým na dané mapě v daném zápase}
    \begin{tabular}{|l|l|l|}
    \hline
    \multicolumn{1}{|c|}{Prediktor} & \multicolumn{1}{c|}{Agregace} & \multicolumn{1}{c|}{Popis}                        \\ \hline
    mean\_kills                     & Aritmetický průměr            & Průměrný počet zabití                             \\ \hline
    mean\_assists                   & Aritmetický průměr            & Průměrný počet asistencí                          \\ \hline
    mean\_deaths                    & Aritmetický průměr            & Průměrný počet smrtí                              \\ \hline
    mean\_hs                        & Geometrický průměr            & Průměrné procento zabití do hlavy                 \\ \hline
    mean\_fkdiff                    & Aritmetický průměr            & Průměrný rozdíl mezi prvním zabitím a první smrtí \\ \hline
    \end{tabular}
\end{table}

\subsection{Trénování a validace modelů}
Pro trénování a validaci modelů se vytvoří náhodné rozdělení souboru v poměru 8:2. Pro trénování modelu bude použito 80 \% z datového souboru, na validaci je použito zbylých 20 \%.
Natrénované modely jsou vyhodnoceny pomocí Waldova testu, který je v každé tabulce v posledním sloupci $Pr(>|z|)$. Případné nevýznamné prediktory jsou pak z modelu
odstraněny a model je natrénován znovu na stejné trénovací množině. Pro validaci modelu je vytvořena matice záměn, která popisuje přesnost predikcí modelu na validačních
datech. K následnému vyhodnocení modelů jsou použity statistiky Přesnost, Senzitivita a Specificita. 

\newpage
\section{Průzkumová analýza dat}
Průzkumová analýza vizualizuje prediktory, hledá různé vztahy a rozdělení proměnných. Díky průzkumu lze určit, které proměnné není vhodné použít pro tvorbu
logistického regresního modelu, např. kvůli problému multikolinearity.

\subsection{Korelační matice}
Pro logistickou regresi je důležité, aby prediktory nebyly lineárně závislé. Přehled korelací mezi kvantitativními prediktory lze zjistit z korelační matice.

\begin{figure}[H]
    \centering
    \includegraphics{../obrazky/prediktory_corr_matice.png}
    \caption{Korelační matice} 
    \label{fig:korelacni_matice}
\end{figure}

Z korelační matice \ref{fig:korelacni_matice} lze vyčíst, že korelace mezi rankem týmu a charakteristikami hráčů se blíží nule. Z toho plyne, že neexistuje lineární závislost mezi
výkonem hráče a rankem týmu. Zároveň je vidět silná korelace mezi prediktorem \textit{rating} a prediktory \textit{fkdiff}, \textit{deaths} a \textit{kills}.
Jelikož by díky vysoké korelaci prediktorů vznikl problém multikolinearity, prediktor \textit{rating} ve finálních modelech není použit.

\subsection{Histogramy kvantitativních prediktorů}

\begin{figure}[H]
    \centering
    \includegraphics{../obrazky/histogram_prediktoru.png}
    \caption{Histogram prediktorů} 
    \label{fig:histogram_prediktoru}
\end{figure}

Histogramy prediktorů z obrázku \ref{fig:histogram_prediktoru} ukazují, že prediktory \textit{kills}, \textit{deaths} a \textit{hs} mají normální rozdělení
a v prediktorech se nenachází mnoho extrémních hodnot. Prediktor \textit{fkdiff} má bimodální rozdělení. Prediktor \textit{assists} je 
zešikmení doprava, což značí velké množství odlehlých či extrémních hodnot. Pro logistickou regresi není předpoklad normálního rozdělení prediktorů, a proto analýza
slouží čistě k získání povědomí o tom, jakých hodnot každý prediktor nabývá a jaké je jejich rozdělení.

\subsection{Míra výhry pro nejlepší týmy}
Pro výběr do logistického modelu je nutné vybrat referenční tým, který je považován za jeden z nejlepších. 

\begin{figure}[H]
    \centering
    \includegraphics{../obrazky/mira_vyhry_tymu.png}
    \caption{Procento vyhraných zápasů na dané mapě za stranu Counter-Terroristů} 
    \label{fig:mira_vyhry_tymu}
\end{figure}

Obrázek \ref{fig:mira_vyhry_tymu} ukazuje, že tým Astralis má v datovém souboru nejlepší míru výhry. Rozdíl mezi mírou výhry Astralis a týmy SK je necelých 7 procent.
Z tohoto důvodu je tým Astralis použit při analýze dat jako jeden z referenčních týmů.

\newpage
\section{Predikce výhry hráčů na různých mapách}
Cílem modelu je predikovat výhru zápasu pro jednotlivé hráče na různých mapách a identifikovat významné prediktory s nimi spojené. Model lze využít na profesionální
úrovni k identifikaci toho, jaká charakteristika nejvíce přispívá k výhře či prohře hráče. Prediktory se týkají pouze výkonu jednotlivých
hráčů, model tedy pro předpověď výhry hráče nepoužívá charakteristiky spoluhráčů. K modelování je použit spojený datový soubor, který je detailně popsaný v
sekci \ref{spojent_datovy_soubor}. Obecně by šlo model zapsat následovně:

\begin{align*}
    \begin{split}
        &P(1 | X_{kills}, X_{assists}, X_{deaths}, X_{fkdiff}, X_{starting_{ct}}) = \frac{1}{1 + e^{-z}} \\
        &z = \beta_0 + \beta_1*X_{kills} + \beta_2*X_{assists} + \beta_3*X_{deaths} + \\
        &+ \beta_4*X_{fkdiff} + \beta_5*X_{starting_{ct}}.
    \end{split}
\end{align*}

Pro porovnání jsou vybrány mapy Mirage a Vertigo. Mapa Mirage je jednou z nejvíce tradičních map a mapa Vertigo je naopak nejnovější přídavek do hry.
Díky rozdílným modelům bude možné zkoumat, na čem pravděpodobnost výhry na mapách záleží a jaké strategie je na dané mapě výhodnější použít.

\subsection{Model pro mapu Mirage}

\input{modely/Mirage_model.tex}

Tabulka \ref{tab:Mirage_model} představuje model se všemi významnými prediktory. Prediktory \textit{kills}, \textit{assists} a \textit{fkdiff} šanci na výhru
hráče zvyšují. Naopak prediktory \textit{deaths} a \textit{starting\_ct} šanci snižují. Model lze také zapsat jako přepis funkce.

\begin{align}
    \begin{split}
        &P(1 | X_{kills}, X_{assists}, X_{deaths}, X_{fkdiff}, X_{starting_{ct}}) = \frac{1}{1 + e^{-z}} \\
        &z = 2,3954 + 0,1807*X_{kills} + 0,3031*X_{assists} - 0,3661*X_{deaths} - \\
        &- 0,1957*X_{hs} + 0,0171*X_{fkdiff} - 0,1995*X_{starting_{ct}}
    \end{split}
\end{align}

Ze získaných koeficientů lze získat změnu šance. Změnu šance s každým dalším zabitím lze získat umocnění parametru $\beta_1 = 0,1807$ na konstantu $e$.

\begin{align}
    \begin{split}
        \textit{Změna šance} &\sim e^{\beta_1} \\
                             &\sim e^{0,1807} \\
                             &\sim 1.1980
    \end{split}
\end{align}

S každým dalším zabitým hráčem se zvyšuje šance na výhru hráče zhruba 1,2 krát. U prediktoru \textit{deaths} je parametr $\beta_3$ záporný. To znamená, že se šance
na výhru snižuje.

%%% https://www.statology.org/interpret-odds-ratio-less-than-1/
\begin{align}
    \begin{split}
        \textit{Změna šance} &\sim e^{\beta_3} \\
                             &\sim e^{-0,3661} \\                     
                             &\sim 0.6934
    \end{split}
\end{align}

Parametr lze interpretovat tak, že s každou další hráčovou smrtí se jeho šance na výhru sníží o zhruba 31 \%. 

\subsubsection{Matice záměn pro mapu Mirage}
Na predikci je použitá validační podmnožina a model z tabulky \ref{tab:Mirage_model}.

\input{matice/Mirage_matice.tex}

\input{statistiky/Mirage_stats.tex}

Z tabulky \ref{tab:Mirage_matice} je vidět, že model predikoval správně 7 037 výher ($\sim 81,31 \%$) a 6 804 proher ($\sim 77,83 \%$).
Celkově model určil správně 13 841 objektů ($\sim 79,56 \%$).

\newpage
\subsection{Model pro mapu Vertigo}
Model pro mapu Vertigo má identické vstupní prediktory, podle kterých se predikuje proměnná \textit{map\_winner}, jako model pro mapu Mirage.

\input{modely/Vertigo_model.tex}

Na rozdíl od mapy Mirage jsou v modelu pro mapu Vertigo nevýznamné parametry. Statisticky nevýznamné prediktory \textit{hs}, \textit{fkdiff} a \textit{starting\_ct}
jsou z modelu odebrány a model je znovu natrénován.

\input{modely/Vertigo_model_opt.tex}

Pro hráče jsou na mapě Vertigo významné pouze prediktory \textit{kills}, \textit{assists} a \textit{deaths}. Ostatní prediktory \textit{hs},
\textit{fkdiff} a \textit{starting\_ct} jsou pro model nevýznamné. Optimalizovaný model lze zapsat do následující rovnice:

\begin{align}
    \begin{split}
        &P(1 | X_{kills}, X_{assists}, X_{deaths}) = \frac{1}{1 + e^{-z}} \\
        &z = 1,9090 + 0,1841*X_{kills} + 0,2981*X_{assists} - 0,3521*X_{deaths}
    \end{split}
\end{align}

Každé hráčovo zabití vede ke zvýšení šance na výhru o zhruba 20 \%. Každá další hráčova smrt vede ke snížení šance na výhru o zhruba 30 \%. 
Matice záměn i statistiky modelu jsou potom vyhodnocené na optimalizovaném modelu pomocí validačních dat.

\input{matice/Vertigo_matice_opt.tex}

\input{statistiky/Vertigo_stats_opt.tex}

Z tabulky \ref{tab:Vertigo_stats_opt} je vidět, že model predikoval správně 455 výher ($\sim 77,65 \%$) a 411 proher ($\sim 78,44 \%$).
Celkově model určil správně 866 objektů ($\sim 78,02 \%$).

\subsection{Interpretace a porovnání modelů}
Na mapě Mirage jsou pro hráče významné všechny prediktory. Nejvíc pozitivní vliv má na výhru hráče počet asistencí a největší negativní vliv
na výhru hráče má pak počet smrtí. Významnost prediktorů \textit{fkdiff} a \textit{assists} naznačuje, že je důležitá souhra hráčů a zkušenější týmy
mají na mapě výhodu. Pokud hráči hrají spolu, mohou se při zabíjení nepřátel doplňovat (prediktor \textit{assists}). Zároveň je důležité, aby se v zápase
hráči navzájem podporovali a mohli získat první zabití v daném kole (prediktor \textit{fkdiff}).

Pro mapu Vertigo jsou naopak významné pouze prediktory \textit{kills}, \textit{assists} a \textit{deaths}. Pro hráče tedy není důležité, jak přesně
střílí (prediktor \textit{hs}), jak dobře se tým podporuje na začátku kola (prediktor \textit{fkdiff}) ani na jaké straně hráč začíná (prediktor \textit{starting\_ct}).
Největší vliv na výhru zde má prediktor \textit{assists}, největší vliv na výhru má pak prediktor \textit{deaths}. Porovnání obou statistik obou modelů je pak
v následující tabulce.

\input{tabulky/Mirage_Vertigo_porovnani.text}

Mapa Mirage se hodí nejvíce na predikci proher díky své vysoké specificitě. Rozdíly mezi statistikami pro mapu Vertigo jsou pak nepatrné a menší než 1 \%.
Největší rozdíl mezi modely je ve Specificitě, která je pro model na mapě Mirage větší o zhruba 3,5 procentních bodů.

Modely, matice záměn i vybrané statistiky z matic záměn pro ostatní mapy jsou v příloze \ref{apx:02}. Zajímavé je, že pro všechny ostatní modely
jsou významné všechny prediktory. To z mapy Vertigo, která má významné pouze 3 prediktory, dělá poněkud unikátní mapu. Z tohoto závěru lze usoudit, že
pro všechny mapy, které se hrají už nějakou dobu, je důležitý jak výkon hráče, tak sehranost týmu. Jelikož je mapa Vertigo nová, je na začátku svého
vývoje a pro hráče je stále relativně neznámá. Jelikož je na mapě Vertigo méně významná sehranost, zkušenosti a spolupráce v týmu, měli by jí preferovat
nové či semi-profesionální týmy. Mapu také mohou využít profesionální týmy, které spoléhají spíše na individuální výkon hráčů, než na týmové strategie.

\newpage
\section{Predikce výhry týmu}
Cílem modelů je predikovat výhru na základě agregovaných charakteristik hráčů za tým na mapě. Tento typ modelu se hodí zejména v sázkových kancelářích. Díky referenčním
modelům lze určit šanci, že určitý tým vyhraje. To umožní kancelářím stanovit výdělečný kurz pro zápas ještě před tím, než vůbec začal. Matematický přepis modelu
je následující:

\begin{align}
    \begin{split}
        P(1 | &X_{mean\_kills}, X_{mean\_assists}, X_{mean\_deaths}, X_{mean\_hs}, X_{mean\_fkdiff}, X_{team\_rank}, \\
              &X_{mapCache*starting\_ct}, X_{mapCobblestone*starting\_ct}, X_{mapDust2*starting\_ct}, X_{mapInferno*starting\_ct}, \\
              &X_{mapMirage*starting\_ct}, X_{mapNuke*starting\_ct}, X_{mapOverpass*starting\_ct}, X_{mapTrain*starting\_ct}, \\
              &X_{mapVertigo*starting\_ct}) = \frac{1}{1 + e^{-z}} \\
        z = &\beta_0 + \beta_1*X_{mean\_kills} + \beta_2*X_{mean\_assists} + \beta_3*X_{mean\_deaths} + \\
            &+ \beta_4*X_{mean\_hs} + \beta_5*X_{mean\_fkdiff} + \beta_6*X_{team\_rank} + \\
            &+ \beta_7*X_{mapCache*starting\_ct} + \beta_8*X_{mapCobblestone*starting\_ct} + \\
            &+ \beta_9*X_{mapDust2*starting\_ct} +\beta_{10}*X_{mapInferno*starting\_ct} + \\
            &+ \beta_{11}*X_{mapMirage*starting\_ct} + \beta_{12}*X_{mapNuke*starting\_ct} + \\
            &+ \beta_{13}*X_{mapOverpass*starting\_ct} + \beta_{14}*X_{mapTrain*starting\_ct} + \\
            &+ \beta_{15}*X_{mapVertigo*starting\_ct}
    \end{split}
\end{align}

Prediktory \textit{mean\_kills}, \textit{mean\_assists}, \textit{mean\_deaths}, \textit{mean\_hs}, \textit{mean\_fkdiff} jsou průměrné charakteristiky hráčů v týmu na dané mapě
v daném zápase a lze očekávat, že šanci na výhru ovlivňují. Dále do modelu vstupuje prediktor \textit{team\_rank}, který značí rank týmu v daném zápase. Model následně
obsahuje interakci mezi proměnnou \textit{map} a \textit{starting\_ct}. Interakce je z toho důvodu, že vliv počáteční strany je na každé mapě jiný. Přesněji jsou prediktory
definované v sekci \ref{sec:agregovany_datovy_soubor}

\subsection{Celkový model}

\input{modely/Global_model.tex}

Parametry celkového modelu se nachází v tabulce \ref{tab:Global_model}. První vytvořený model je sestavený na celém trénovacím datovém souboru. Pro model jsou
významné všechny prediktory bez interakce, jmenovitě \textit{mean\_kills}, \textit{mean\_assists}, \textit{mean\_deaths}, \textit{mean\_hs},\textit{mean\_fkdiff} a
\textit{team\_rank}. Interakce mezi prediktory \textit{map} a \textit{starting\_ct} není významná u map Vertigo, Cache a Nuke.

Agregované charakteristiky hráče \textit{mean\_kills} a \textit{mean\_assists} šanci na výhru týmu zvyšují. Pokud se průměr zabitých nepřátel za tým zvýší o jednotku,
šance na výhru týmu se zvýší zhruba 3,96 krát. Pokud se průměr smrtí hráčů za tým zvýší o jednotku, šance na výhru se sníží zhruba 0,25 krát. Všechny statisticky
významné interakce mezi prediktory \textit{map} a \textit{starting\_ct} naznačují, že je pro tým nevýhodné začínat na straně Counter-Terroristů. Jejich šance
na výhru se vždy sníží, a to nejvíce na mapě Overpass, kde se šance sníží zhruba 0,62 krát. Zajímavý je koeficient u prediktoru \textit{team\_rank}, který říká,
že s růstem ranku týmu se šance na výhru sníží zhruba 0,99 krát. To lze vysvětlit tím, že lepší týmy hrají proti lepším týmům a jejich 
šance na výhru je nižší. Model lze zapsat jako přepis funkce následovně:

\begin{align}
    \begin{split}
        P(1 | &X_{mean\_kills}, X_{mean\_assists}, X_{mean\_deaths}, X_{mean\_hs}, X_{mean\_fkdiff}, X_{team\_rank}, \\
              &X_{mapCache*starting\_ct}, X_{mapCobblestone*starting\_ct}, X_{mapDust2*starting\_ct}, X_{mapInferno*starting\_ct}, \\
              &X_{mapMirage*starting\_ct}, X_{mapNuke*starting\_ct}, X_{mapOverpass*starting\_ct}, X_{mapTrain*starting\_ct}, \\
              &X_{mapVertigo*starting\_ct}) = \frac{1}{1 + e^{-z}} \\
        z = &0,4135 + 1,376*X_{mean\_kills} + 0,143*X_{mean\_assists} - 1,402*X_{mean\_deaths} - \\
            &- 0,615*X_{mean\_hs} - 0,064*X_{mean\_fkdiff} - 0,001*X_{team\_rank} - \\
            &- 0,040*X_{mapCache*starting\_ct} - 0,282*X_{mapCobblestone*starting\_ct} - \\
            &- 0,318*X_{mapDust2*starting\_ct} - 0,272*X_{mapInferno*starting\_ct} - \\
            &- 0,239*X_{mapMirage*starting\_ct} - 0,113*X_{mapNuke*starting\_ct} - \\
            &- 0,418*X_{mapOverpass*starting\_ct} - 0,177*X_{mapTrain*starting\_ct} + \\
            &+ 0,259*X_{mapVertigo*starting\_ct}
    \end{split}
\end{align}